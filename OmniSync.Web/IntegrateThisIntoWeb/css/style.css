:root {
    --bg: #050505; --panel: #111; --border: #333; --text: #aaa; --white: #eee;
    --c-boot: #444; --c-work: #ffb000; --c-league: #00aeff; --c-rest: #2d5a27;
    --c-chaos: #d500f9; --c-flex: #666; --c-bed: #607d8b; --c-sleep: #0d1b2a;
    --c-cal: #00bcd4; /* Cyan for Calendar Events */
    --font-mono: 'Courier New', monospace; --font-ui: system-ui, -apple-system, sans-serif;
}
* { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
::-webkit-scrollbar { width: 6px; background: #000; }
::-webkit-scrollbar-thumb { background: #333; }
body { background: var(--bg); color: var(--text); font-family: var(--font-ui); height: 100vh; display: flex; overflow: hidden; }

/* SIDEBAR */
.sidebar { width: 320px; background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 20; }
.sidebar-content { padding: 20px; overflow-y: auto; flex: 1; display: flex; flex-direction: column; gap: 20px; }

h2 { font-size: 0.7rem; color: var(--c-work); text-transform: uppercase; margin-bottom: 8px; border-bottom: 1px solid #222; padding-bottom: 4px; }
.control-box { background: #080808; padding: 12px; border: 1px solid var(--border); border-radius: 4px; }
.row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 0.85rem; }
input[type="time"], input[type="text"] { background: #1a1a1a; color: #fff; border: 1px solid #333; padding: 4px; font-family: var(--font-mono); width: 100%; text-align: center; }
input[type="range"] { width: 100%; background: #333; height: 4px; -webkit-appearance: none; margin-top: 10px; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 12px; height: 12px; background: #fff; border-radius: 50%; cursor: pointer; }

.btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; margin-top: 8px; }
button { background: #1a1a1a; color: #ccc; border: 1px solid #333; padding: 6px; cursor: pointer; font-size: 0.7rem; }
button:hover { background: var(--c-work); color: #000; }
.btn-reset { grid-column: span 2; border-color: #522; color: #a55; }
.btn-reset:hover { background: #522; color: #fff; }

/* MAIN */
.main { flex: 1; display: flex; flex-direction: column; position: relative; }
.status-bar { height: 50px; background: #080808; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; }
.clock { font-family: var(--font-mono); color: var(--white); font-size: 1.1rem; }
.tokens { display: flex; gap: 8px; }
.token { width: 30px; height: 30px; border: 2px solid var(--c-chaos); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--c-chaos); font-weight: bold; cursor: pointer; transition: 0.2s; font-size: 0.8rem; }
.token:hover { background: var(--c-chaos); color: #fff; box-shadow: 0 0 10px var(--c-chaos); }
.token.used { border-color: #222; color: #333; cursor: default; box-shadow: none; background: transparent; }

/* MODULES */
.focus-module { padding: 20px 30px; border-bottom: 1px solid var(--border); background: #0a0a0a; display: flex; justify-content: space-between; align-items: center; }
.focus-info h1 { font-size: 2rem; color: var(--white); margin: 0; }
.focus-info h3 { font-size: 0.8rem; color: var(--c-work); margin-bottom: 5px; }
.timer-huge { font-family: var(--font-mono); font-size: 3.5rem; color: var(--white); }

.vis-container { padding: 15px; overflow-x: auto; background: #050505; border-bottom: 1px solid var(--border); }
.timeline-track { display: flex; height: 40px; min-width: 100%; position: relative; background: #111; border-radius: 2px; overflow: hidden; }
.time-block { position: relative; height: 100%; border-right: 1px solid rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; font-size: 0.65rem; color: #000; font-weight: bold; white-space: nowrap; overflow: hidden; }
.now-marker { position: absolute; top: 0; bottom: 0; width: 2px; background: #f00; z-index: 10; box-shadow: 0 0 5px #f00; display: none; pointer-events: none; }

/* LIST */
.schedule-container { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 80px; }
.schedule-item { display: flex; align-items: center; background: #0e0e0e; margin-bottom: 6px; padding: 10px; border-left: 3px solid #333; cursor: grab; transition: all 0.3s; }
.schedule-item.past { opacity: 0.4; filter: grayscale(0.8); }
.schedule-item.active { border-left-width: 6px; background: #161616; box-shadow: 0 0 15px rgba(0,0,0,0.5); transform: scale(1.01); z-index: 10; }
.schedule-item.future { opacity: 1; }
.schedule-item.dragging { opacity: 0.5; background: #222; }

.si-time { width: 90px; font-family: var(--font-mono); color: #555; font-size: 0.8rem; }
.si-name { flex: 1; font-weight: 500; color: #ccc; font-size: 0.9rem; }
.si-dur { color: #444; font-size: 0.8rem; margin-right: 10px; }
.handle { color: #333; margin-right: 10px; }

.audio-item { display: flex; justify-content: space-between; padding: 6px; border-bottom: 1px solid #222; font-size: 0.8rem; cursor: pointer; color: #888; }
.audio-item:hover { background: #111; color: var(--white); }
.del-btn { color: #522; font-weight: bold; padding: 0 5px; }

/* GCAL SIDEBAR ITEMS */
.gcal-item { display: flex; gap: 8px; font-size: 0.75rem; color: #ccc; padding: 4px 0; border-bottom: 1px solid #222; }
.gcal-marker { color: var(--c-cal); font-weight: bold; }